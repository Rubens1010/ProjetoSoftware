<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finanças</title>
  <link rel="icon" href="{% static 'img/logo3.png' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script src="{% static 'js/bootstrap.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



<!-- Fontawesome -->
<link type="text/css" href="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">


<!-- Volt CSS -->
<link type="text/css" href="https://appsrv1-147a1.kxcdn.com/volt-dashboard/css/volt.css" rel="stylesheet">

  
<style>
#container {
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #d1d5db;
}

#calculator {
    background-color: #262626;
    padding: 40px;
    border-radius: 8px;
    box-shadow: 10px 10px 10px rgba(0,0,0,0.323);
    display: flex;
    flex-direction: column;
    gap: 25px;
}

#calculator h2 {
    font-size: 30px;
    color: white;
    position: relative;
}

#calculator h2::before{
    position: absolute;
    content: '';
    height: 3px;
    width: 150px;
    bottom: 5px;
}

#input_box {
    display: flex;
    flex-direction: column;
    gap: 25px;
}

.input-field {
    display: flex;
    flex-direction: column;
    width: 100%;
}

.input-field label {
    font-size: 15px;
    color: #c8ced6;
    font-weight: 500;
}

.input-field input {
    background-color: transparent;
    border: none;
    border-bottom: 1px solid #2ed06e;
    color: #fff;
    font-size: 20px;
    padding: 5px;
}

.input-field input:focus {
    outline: none;
}

#result {
    text-align: center;
}

#result h4 {
    color: white;
}



#total {
    font-size: 40px;
}

#calculate {
    border: none;
    padding: 10px;
    color: #fff;
    font-weight: bold;
    font-size: 18px;
    border-radius: 4px;
    cursor: pointe;
    background-color: #2ed06e;
}

select {
    background-color: #262626;
    color: #2ed06e;
    border: #262626;
}

</style>
</head>

<body>

  <nav class="navbar navbar-dark navbar-theme-primary px-4 col-12 d-md-none">
      <a class="navbar-brand mr-lg-5" href="/">
          <img class="navbar-brand-dark" src="{% static '/img/assets/images/favicon.svg' %}" alt="Volt logo">
      </a>
      <div class="d-flex align-items-center">
          <button class="navbar-toggler d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
          </button>
      </div>
  </nav>

  <div class="container-fluid bg-soft">
      <div class="row">
          <div class="col-12">

              
  <nav id="sidebarMenu" class="sidebar d-md-block bg-primary text-white collapse px-4">
      <div class="sidebar-sticky pt-3 mx-auto">
          <div class="user-card d-flex d-md-none align-items-center justify-content-between justify-content-md-center pb-4">
          <div class="d-flex align-items-center">
              <div class="user-avatar lg-avatar mr-4">
              <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" class="card-img-top rounded-circle border-white" alt="Bonnie Green">
              </div>
              <div class="d-block">
              <h2 class="h6">
                  test
              </h2>
              <a href="{% url 'user-logout' %}" class="btn btn-secondary text-dark btn-xs">
                  <span class="mr-2"><span class="fas fa-sign-out-alt"></span></span>Sign Out</a>
              </div>
          </div>
          <div class="collapse-close d-md-none">
              <a href="#sidebarMenu" class="fas fa-times" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="true" aria-label="Toggle navigation"></a>
          </div>
          </div>
          <ul class="nav flex-column">
          <li class="nav-item ">
              <a href="{% url 'dashboard' %}" class="nav-link">
              <span class="sidebar-icon"><span class="fas fa-chart-pie"></span></span>
              <span>Dashboard</span>
              </a>
          </li>
          <li class="nav-item active ">
              <a href="#" class="nav-link">
                  <span class="sidebar-icon"><span class="fas fa-hand-holding-usd"></span></span>
                  <span>Finanças</span>
              </a>
          </li>
          <li class="nav-item  ">
              <a href="/settings.html" class="nav-link">
                  <span class="sidebar-icon"><span class="fas fa-cog"></span></span>
                  <span>Settings</span>
              </a>
          </li>
          <li class="nav-item">
              <span class="nav-link  collapsed  d-flex justify-content-between align-items-center" data-toggle="collapse" data-target="#submenu-app">
              <span>
                  <span class="sidebar-icon"><span class="fas fa-table"></span></span> 
                  Tables
              </span>
              <span class="link-arrow"><span class="fas fa-chevron-right"></span></span> 
              </span>
              <div class="multi-level collapse " role="list" id="submenu-app" aria-expanded="false">
                  <ul class="flex-column nav">
                      <li class="nav-item "><a class="nav-link" href="/bootstrap-tables.html"><span>Bootstrap Tables</span></a></li>
                  </ul>
              </div>
          </li>
          <li class="nav-item">
              <a href="{% url 'user-logout' %}" class="nav-link">
                  <span class="sidebar-icon"><span class="fas fa-sign-out-alt text-danger"></span></span>
                  <span>Logout</span>
              </a>
          </li>            
          <li role="separator" class="dropdown-divider mt-4 mb-3 border-black"></li>
          <li class="nav-item">
              <a href="/" class="nav-link d-flex align-items-center">
              <span class="sidebar-icon">
                  <img src="{% static '/img/assets/images/favicon.svg' %}" height="20" width="20" alt="Volt Logo">
              </span>
              <span class="mt-1">Presentation</span>
              </a>
          </li>
          </ul>
      </div>
  </nav>


          
              

  <main class="content">   
      <nav class="navbar navbar-top navbar-expand navbar-dashboard navbar-dark pl-0 pr-2 pb-0">
          <div class="container-fluid px-0">
            <div class="d-flex justify-content-between w-100" id="navbarSupportedContent">
              <div class="d-flex">
                <!-- Search form -->
                <form class="navbar-search form-inline" id="navbar-search-main">
                  <div class="input-group input-group-merge search-bar">
                      <span class="input-group-text" id="topbar-addon"><span class="fas fa-search"></span></span>
                      <input type="text" class="form-control" id="topbarInputIconLeft" placeholder="Search" aria-label="Search" aria-describedby="topbar-addon">
                  </div>
                </form>
              </div>
              <!-- Navbar links -->
              <ul class="navbar-nav align-items-center">  
                <li class="nav-item dropdown">
                  <a class="nav-link pt-1 px-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <div class="media d-flex align-items-center">
                      <img class="user-avatar md-avatar rounded-circle" alt="Image placeholder" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
                      <div class="media-body ml-2 text-dark align-items-center d-none d-lg-block">
                        <span class="mb-0 font-small font-weight-bold">
                          olá {{ request.user}}!
                        </span>
                      </div>
                    </div>
                  </a>
                  <div class="dropdown-menu dashboard-dropdown dropdown-menu-right mt-2">
                    <a class="dropdown-item font-weight-bold" href="/settings.html"><span class="fas fa-cog"></span>Settings</a>
                    <div role="separator" class="dropdown-divider"></div>
                    <a class="dropdown-item font-weight-bold" href="{% url 'user-logout' %}">
                        <span class="fas fa-sign-out-alt text-danger"></span>Logout</a>
                  </div>
                </li>
              </ul>
            </div>
          </div>
      </nav>


      
    
   

      <main id="container">
        <div id="calculator">
            <h2>Calculadora de Investimento  <select id="investment-type" onchange="updateSubtypes()">
                <option value="crypto">Criptomoedas</option>
                <option value="stocks">Ações</option>
                <option value="fixed-income">Renda Fixa</option>
            </select></h2>
            <label for="subtype">Subtipo de Investimento:</label>
            <select id="subtype">
                <!-- Subtipos serão preenchidos dinamicamente -->
            </select>
            <div id="input_box">
                <div class="input-field">
                    <label for="value">Valor Inicial (capital):</label>
                    <input type="number" id="value">
                </div>
                <div class="input-field">
                    <label for="fee">Taxa de Juros a.m:</label>
                    <input type="number" id="fee">
                </div>
                <div class="input-field">
                    <label for="time">Tempo de Rendimento a.m:</label>
                    <input type="number" id="time">
                </div>
            </div>
            <div id="result">
                <h4>Resultado Juros:</h4>
                <span id="total">R$ 0,00</span>
                <p id="total-invested">Total Investido: R$ 0,00</p>
                <p id="total-interest">Total Acumulado: R$ 0,00</p>
            </div>
            <button id="calculate" onclick="calculateAndUpdateChart()">Calcular</button>
        </div>

        <div id="chart-container">
            <canvas id="growthChart"></canvas>
        </div>
    </main>

    <script src="{% static 'chat.js' %}" type="text/javascript"></script>


    <script>
    // Inicialize a variável growthChart no escopo global
    let growthChart = null;

    // Função para formatar números como moeda brasileira
    const formatCurrency = (number) => {
        return number.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    };

    // Função que será chamada quando o botão for clicado
    function calculateAndUpdateChart() {
        const value = parseFloat(document.getElementById('value').value);
        const time = parseInt(document.getElementById('time').value);
        const investmentType = document.getElementById('investment-type').value;
        const investmentSubtype = document.getElementById('subtype').value;

        // Verifica se os valores de entrada são válidos
        if (isNaN(value) || isNaN(time) || value <= 0 || time <= 0) {
            alert('Por favor, insira valores válidos para todos os campos.');
            return;
        }

        // Definir taxas de retorno diferentes para cada subtipo de investimento
        let fee;
        if (investmentType === 'crypto') {
            switch (investmentSubtype) {
                case 'bitcoin':
                    fee = 0.06; // Exemplo: 6% ao mês para Bitcoin
                    break;
                case 'ethereum':
                    fee = 0.05; // Exemplo: 5% ao mês para Ethereum
                    break;
                default:
                    fee = 0; // Caso algo dê errado
            }
        } else if (investmentType === 'stocks') {
            switch (investmentSubtype) {
                case 'tech':
                    fee = 0.04; // Exemplo: 4% ao mês para Ações de Tecnologia
                    break;
                case 'finance':
                    fee = 0.03; // Exemplo: 3% ao mês para Ações de Financeiras
                    break;
                default:
                    fee = 0;
            }
        } else if (investmentType === 'fixed-income') {
            switch (investmentSubtype) {
                case 'cdb':
                    fee = 0.02; // Exemplo: 2% ao mês para CDB
                    break;
                case 'tesouro':
                    fee = 0.015; // Exemplo: 1.5% ao mês para Tesouro Direto
                    break;
                default:
                    fee = 0;
            }
        }

        // Calcula o valor total ao final do período
        const total = value * Math.pow((1 + fee), time);

        // Calcula o total investido (apenas o capital inicial)
        const totalInvested = value * time;

        // Calcula o juros acumulado sozinho
        const totalInterest = total - value;

        // Exibe os resultados formatados
        document.getElementById('total').innerHTML = "Total: " + formatCurrency(total);
        document.getElementById('total-invested').innerHTML = "Total Investido: " + formatCurrency(totalInvested);
        document.getElementById('total-interest').innerHTML = "Juros Acumulados: " + formatCurrency(totalInterest);

        // Calcula os valores ao longo do tempo para o gráfico
        const valuesOverTime = [];
        for (let i = 0; i <= time; i++) {
            valuesOverTime.push(value * Math.pow((1 + fee), i));
        }

        // Atualiza o gráfico
        updateChart(valuesOverTime);
    }

    // Função para criar e atualizar o gráfico
    function updateChart(data) {
        const ctx = document.getElementById('growthChart').getContext('2d');

        // Verifica se o gráfico já existe e o destrói antes de criar um novo
        if (growthChart instanceof Chart) {
            growthChart.destroy();
        }

        growthChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: Array.from({ length: data.length }, (_, i) => i), // Cria os labels dos meses
                datasets: [{
                    label: 'Valor ao longo do tempo',
                    data: data,
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    fill: true,
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Meses'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Valor (R$)'
                        }
                    }
                }
            }
        });
    }

    // Função para atualizar os subtipos de investimento dinamicamente
    function updateSubtypes() {
        const investmentType = document.getElementById('investment-type').value;
        const subtypeSelect = document.getElementById('subtype');
        
        // Limpar os subtipos atuais
        subtypeSelect.innerHTML = '';

        // Adicionar subtipos com base no tipo de investimento selecionado
        if (investmentType === 'crypto') {
            subtypeSelect.innerHTML = `
                <option value="bitcoin">Bitcoin</option>
                <option value="ethereum">Ethereum</option>
            `;
        } else if (investmentType === 'stocks') {
            subtypeSelect.innerHTML = `
                <option value="tech">Ações de Tecnologia</option>
                <option value="finance">Ações Financeiras</option>
            `;
        } else if (investmentType === 'fixed-income') {
            subtypeSelect.innerHTML = `
                <option value="cdb">CDB</option>
                <option value="tesouro">Tesouro Direto</option>
            `;
        }
    }


    </script>
  
  <!-- Core -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/popper.js/dist/umd/popper.min.js"></script>
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
  
  <!-- Vendor JS -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/onscreen/dist/on-screen.umd.min.js"></script>
  
  <!-- Slider -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/nouislider/distribute/nouislider.min.js"></script>
  
  <!-- Jarallax -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/jarallax/dist/jarallax.min.js"></script><div style="position: fixed; top: -9999px; left: 0px; height: 100vh; width: 0px;"></div>
  
  <!-- Smooth scroll -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  
  <!-- Count up -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/countup.js/dist/countUp.umd.js"></script>
  
  <!-- Notyf -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/notyf/notyf.min.js"></script>
  
  <!-- Charts -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/chartist/dist/chartist.min.js"></script>
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js"></script>
  
  <!-- Datepicker -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/vanillajs-datepicker/dist/js/datepicker.min.js"></script>
  
  <!-- Simplebar -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/vendor/simplebar/dist/simplebar.min.js"></script>

  <!-- Github buttons -->
  <script async="" defer="" src="https://buttons.github.io/buttons.js"></script>

  <!-- Volt JS -->
  <script src="https://appsrv1-147a1.kxcdn.com/volt-dashboard/js/volt.min.js"></script>
  
  
  <!-- Specific Page JS goes HERE  -->
  



</body>

</html>